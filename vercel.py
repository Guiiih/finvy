vercel dev 
Vercel CLI 44.7.0
> Creating initial build

> frontend@0.0.0 build
> run-p type-check "build-only {@}" --


> frontend@0.0.0 type-check
> vue-tsc --noEmit -p tsconfig.app.json


> frontend@0.0.0 build-only
> vite build

vite v5.4.19 building for production...
‚úì 518 modules transformed.
dist/assets/FinvyFavicon-eel6Tkcb.svg                 0.43 kB ‚îÇ gzip:   0.30 kB
dist/index.html                                       1.11 kB ‚îÇ gzip:   0.47 kB
dist/assets/primeicons-C6QP2o4f.woff2                35.15 kB
dist/assets/primeicons-MpK4pl85.ttf                  84.98 kB
dist/assets/primeicons-WjwUDZjB.woff                 85.06 kB
dist/assets/primeicons-DMOk5skT.eot                  85.16 kB
dist/assets/primeicons-Dr5RGzOO.svg                 342.53 kB ‚îÇ gzip: 105.26 kB
dist/assets/SettingsView-o-vkuNg_.css                 0.08 kB ‚îÇ gzip:   0.09 kB
dist/assets/LoginView-Cu-VCW46.css                    0.34 kB ‚îÇ gzip:   0.18 kB
dist/assets/RegisterView-C2z4aE8X.css                 0.60 kB ‚îÇ gzip:   0.26 kB
dist/assets/UpdatePasswordView-DCdA_QTw.css           0.61 kB ‚îÇ gzip:   0.34 kB
dist/assets/LedgerView-DD2qwY42.css                   0.66 kB ‚îÇ gzip:   0.35 kB
dist/assets/vue-Bakm0czn.css                          4.27 kB ‚îÇ gzip:   0.93 kB
dist/assets/primevue-BWJi3ZdQ.css                    11.94 kB ‚îÇ gzip:   2.94 kB
dist/assets/index-C1KEsnsR.css                       55.67 kB ‚îÇ gzip:   9.97 kB
dist/assets/errorUtils-CVfqUmfc.js                    0.10 kB ‚îÇ gzip:   0.11 kB
dist/assets/stockControlStore-8ZCO4A3v.js             0.46 kB ‚îÇ gzip:   0.30 kB
dist/assets/check-success-NNSBHI_I.js                 0.61 kB ‚îÇ gzip:   0.31 kB
dist/assets/RegistrationSuccessView-G5QbJ1Ug.js       0.99 kB ‚îÇ gzip:   0.63 kB
dist/assets/PasswordResetSuccessView-xPEGWEEV.js      1.03 kB ‚îÇ gzip:   0.64 kB
dist/assets/InventoryReport-BenxlvTk.js               1.45 kB ‚îÇ gzip:   0.72 kB
dist/assets/UpdatePasswordView-CqejBU_f.js            1.65 kB ‚îÇ gzip:   0.94 kB
dist/assets/productStore-t8AQX1_6.js                  2.05 kB ‚îÇ gzip:   0.82 kB
dist/assets/YearEndClosingView-G8MzlspR.js            2.37 kB ‚îÇ gzip:   1.21 kB
dist/assets/TrialBalance-DhhALtwS.js                  2.41 kB ‚îÇ gzip:   1.03 kB
dist/assets/ForgotPasswordView-BO-oJNMa.js            2.65 kB ‚îÇ gzip:   1.40 kB
dist/assets/AccountsReceivable-DhXVkZbL.js            2.74 kB ‚îÇ gzip:   1.30 kB
dist/assets/AccountsPayable-ClZweYqH.js               2.81 kB ‚îÇ gzip:   1.33 kB
dist/assets/accountStore-BdwdAiw6.js                  2.82 kB ‚îÇ gzip:   1.00 kB
dist/assets/financialTransactionsStore-CQIFI-rj.js    2.86 kB ‚îÇ gzip:   0.95 kB
dist/assets/StockControlView-B7M5lKmL.js              3.23 kB ‚îÇ gzip:   1.42 kB
dist/assets/IncomeStatement-Dvq_X2sa.js               3.45 kB ‚îÇ gzip:   1.32 kB
dist/assets/InitialView-B0wYQYu8.js                   3.57 kB ‚îÇ gzip:   1.71 kB
dist/assets/RegisterView-CGl4IjS1.js                  4.20 kB ‚îÇ gzip:   1.61 kB
dist/assets/CashFlow-Bgg0WXB7.js                      4.35 kB ‚îÇ gzip:   1.44 kB
dist/assets/LoginView-CaapPhL7.js                     4.36 kB ‚îÇ gzip:   1.98 kB
dist/assets/pinia-h02-M6wZ.js                         5.25 kB ‚îÇ gzip:   2.56 kB
dist/assets/BalanceSheet-k_Sbje54.js                  5.53 kB ‚îÇ gzip:   1.71 kB
dist/assets/LedgerView-CsXbqwEr.js                    5.96 kB ‚îÇ gzip:   2.17 kB
dist/assets/supabase-CEoVSuOK.js                      6.13 kB ‚îÇ gzip:   2.23 kB
dist/assets/journalEntryStore-BHdyfWMe.js             6.65 kB ‚îÇ gzip:   2.31 kB
dist/assets/ProductsView-Cmqf1AIh.js                  8.47 kB ‚îÇ gzip:   3.25 kB
dist/assets/reportStore-DMjQGW7M.js                   8.99 kB ‚îÇ gzip:   2.06 kB
dist/assets/AccountsPayableView-BLek7Wb2.js           9.21 kB ‚îÇ gzip:   2.37 kB
dist/assets/AccountsReceivableView-PNO874rc.js        9.43 kB ‚îÇ gzip:   2.40 kB
dist/assets/AccountsView-BNcoX3P1.js                 11.48 kB ‚îÇ gzip:   4.42 kB
dist/assets/LandingPage-Dl6OxCN2.js                  14.65 kB ‚îÇ gzip:   4.34 kB
dist/assets/AccountingPeriodView-DthInewb.js         18.78 kB ‚îÇ gzip:   4.97 kB
dist/assets/ReportsView-Di7MitUy.js                  22.43 kB ‚îÇ gzip:   6.23 kB
dist/assets/SettingsView-yvbM5y3U.js                 32.88 kB ‚îÇ gzip:   9.25 kB
dist/assets/vee-validate-B2e_Rt6W.js                 35.72 kB ‚îÇ gzip:  12.13 kB
dist/assets/JournalEntryView-CYZOpfqE.js             39.71 kB ‚îÇ gzip:  10.10 kB
dist/assets/index-kvCeNqJC.js                        46.53 kB ‚îÇ gzip:  14.01 kB
dist/assets/zod-BP2kjYW0.js                          55.52 kB ‚îÇ gzip:  13.04 kB
dist/assets/vue-CbqkvMrs.js                         182.94 kB ‚îÇ gzip:  60.64 kB
dist/assets/vendor-BG3TMyzr.js                      606.06 kB ‚îÇ gzip: 145.12 kB
dist/assets/primevue-D4SmAMU-.js                    614.21 kB ‚îÇ gzip: 142.31 kB
‚úì built in 3.82s
> Success! Build completed
> Ready! Available at http://localhost:3000
[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[dotenv@17.2.1] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.1] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
[dotenv@17.2.1] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.1] injecting env (0) from .env -- tip: üì° auto-backup env with Radar: https://dotenvx.com/radar
[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[dotenv@17.2.1] injecting env (0) from .env -- tip: üì° version env with Radar: https://dotenvx.com/radar
[dotenv@17.2.1] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.1] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
[dotenv@17.2.1] injecting env (0) from .env -- tip: üì° observe env with Radar: https://dotenvx.com/radar
[dotenv@17.2.1] injecting env (0) from .env -- tip: üì° observe env with Radar: https://dotenvx.com/radar
[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
(node:26164) [DEP0060] DeprecationWarning: The `util._extend` API is deprecated. Please use Object.assign() instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
[15:10:28.614] INFO: [ChatbotService] GEMINI_API_KEY carregada (primeiros 5 chars): AIzaS
[15:10:28.620] INFO: [ChatbotService] GEMINI_API_KEY carregada (primeiros 5 chars): AIzaS
[15:10:28.621] INFO: [ChatbotService] GEMINI_API_KEY carregada (primeiros 5 chars): AIzaS
[15:10:28.740] INFO: [API Router] Roteando o pedido para: GET /api/user-presence
[15:10:28.741] INFO: [API Router] Roteando o pedido para: POST /api/user-presence
[15:10:28.749] INFO: [API Router] Roteando o pedido para: GET /api/accounts
[15:10:28.795] INFO: [API Router] Roteando o pedido protegido para: POST /user-presence
[15:10:28.793] INFO: [API Router] Roteando o pedido protegido para: GET /user-presence
[15:10:28.849] INFO: [API Router] Roteando o pedido protegido para: GET /accounts
[15:10:28.849] INFO: Accounts Handler: user_id recebido:
[15:10:28.849] INFO: [SupabaseClient] getUserOrganizationAndPeriod: Buscando perfil para user_id: cccbd346-d246-41dd-8706-cbb588a84f54
[15:10:28.858] INFO: [SupabaseClient] Perfil encontrado para user_id cccbd346-d246-41dd-8706-cbb588a84f54. Organization ID: b8bc2294-7f29-4206-aa22-f46a0a70b23b, Active Accounting Period ID: 507a4dfd-441a-42b4-9461-b53f69add8c0
backend/handlers/reports/export.ts:360:22 - error TS2554: Expected 3 arguments, but got 2.

360         reportData = calculateDreData(accounts.data, journalEntries);
                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  backend/services/reportService.ts:319:3
    319   costOfGoodsSold: number, // CMV calculado externamente
          ~~~~~~~~~~~~~~~~~~~~~~~
    An argument for 'costOfGoodsSold' was not provided.

backend/handlers/reports/export.ts:364:22 - error TS2554: Expected 3 arguments, but got 2.

364         reportData = calculateBalanceSheetData(accounts.data, journalEntries);
                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  backend/services/reportService.ts:353:3
    353   costOfGoodsSold: number,
          ~~~~~~~~~~~~~~~~~~~~~~~
    An argument for 'costOfGoodsSold' was not provided.

backend/services/reportService.ts:9:3 - error TS2305: Module '"../types/index.js"' has no exported member 'Product'.

9   Product,
    ~~~~~~~

backend/services/reportService.ts:84:5 - error TS2322: Type '{ debit: number; credit: number; id: string; account_id: string; product_id: string | null; quantity: number | null; unit_cost: number | null; }[]' is not assignable to type 'EntryLine[]'.
  Type '{ debit: number; credit: number; id: string; account_id: string; product_id: string | null; quantity: number | null; unit_cost: number | null; }' is missing the following properties from type 'EntryLine': type, amount

84     lines: entry.entry_lines.map((line) => ({
       ~~~~~

  backend/types/index.ts:89:3
    89   lines: EntryLine[]
         ~~~~~
    The expected type comes from property 'lines' which is declared here on type 'JournalEntry'

backend/services/reportService.ts:112:13 - error TS18048: 'line.debit' is possibly 'undefined'.

112         if (line.debit > 0) { // Compra/Entrada
                ~~~~~~~~~~

backend/services/reportService.ts:115:20 - error TS18048: 'line.credit' is possibly 'undefined'.

115         } else if (line.credit > 0) { // Venda/Sa√≠da
                       ~~~~~~~~~~~

backend/services/reportService.ts:159:13 - error TS18048: 'line.debit' is possibly 'undefined'.

159         if (line.debit > 0) { // Compra/Entrada
                ~~~~~~~~~~

backend/services/reportService.ts:161:20 - error TS18048: 'line.credit' is possibly 'undefined'.

161         } else if (line.credit > 0) { // Venda/Sa√≠da
                       ~~~~~~~~~~~

backend/services/reportService.ts:216:13 - error TS18048: 'line.debit' is possibly 'undefined'.

216         if (line.debit > 0) { // Compra/Entrada
                ~~~~~~~~~~

backend/services/reportService.ts:218:20 - error TS18048: 'line.credit' is possibly 'undefined'.

218         } else if (line.credit > 0) { // Venda/Sa√≠da
                       ~~~~~~~~~~~

backend/services/reportService.ts:300:36 - error TS18048: 'line.debit' is possibly 'undefined'.

300         accountData.totalDebits += line.debit;
                                       ~~~~~~~~~~

backend/services/reportService.ts:301:37 - error TS18048: 'line.credit' is possibly 'undefined'.

301         accountData.totalCredits += line.credit;
                                        ~~~~~~~~~~~


Found 12 errors in 2 files.

Errors  Files
     2  backend/handlers/reports/export.ts:360
    10  backend/services/reportService.ts:9