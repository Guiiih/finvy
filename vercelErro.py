 vercel dev
Vercel CLI 44.7.3
> Creating initial build

> frontend@0.0.0 build
> run-p type-check "build-only {@}" --


> frontend@0.0.0 build-only
> vite build


> frontend@0.0.0 type-check
> vue-tsc --noEmit -p tsconfig.app.json

vite v5.4.19 building for production...
‚úì 549 modules transformed.
dist/assets/FinvyFavicon-eel6Tkcb.svg                 0.43 kB ‚îÇ gzip:   0.30 kB
dist/index.html                                       1.11 kB ‚îÇ gzip:   0.47 kB
dist/assets/primeicons-C6QP2o4f.woff2                35.15 kB
dist/assets/primeicons-MpK4pl85.ttf                  84.98 kB
dist/assets/primeicons-WjwUDZjB.woff                 85.06 kB
dist/assets/primeicons-DMOk5skT.eot                  85.16 kB
dist/assets/primeicons-Dr5RGzOO.svg                 342.53 kB ‚îÇ gzip: 105.26 kB
dist/assets/JournalEntryView-tn0RQdqM.css             0.00 kB ‚îÇ gzip:   0.02 kB
dist/assets/SettingsView-o-vkuNg_.css                 0.08 kB ‚îÇ gzip:   0.09 kB
dist/assets/LoginView-4M6CtjCn.css                    0.34 kB ‚îÇ gzip:   0.18 kB
dist/assets/RegisterView-C2z4aE8X.css                 0.60 kB ‚îÇ gzip:   0.26 kB
dist/assets/UpdatePasswordView-D46nTJZz.css           0.61 kB ‚îÇ gzip:   0.34 kB
dist/assets/LedgerView-B5gRfHK0.css                   0.66 kB ‚îÇ gzip:   0.35 kB
dist/assets/vue-Bakm0czn.css                          4.27 kB ‚îÇ gzip:   0.93 kB
dist/assets/primevue-BWJi3ZdQ.css                    11.94 kB ‚îÇ gzip:   2.94 kB
dist/assets/index-Bbb_l9vs.css                       57.01 kB ‚îÇ gzip:  10.24 kB
dist/assets/check-success-NNSBHI_I.js                 0.61 kB ‚îÇ gzip:   0.31 kB
dist/assets/RegistrationSuccessView-Bed2Y0Vm.js       0.99 kB ‚îÇ gzip:   0.62 kB
dist/assets/PasswordResetSuccessView-BuTNL4YU.js      1.03 kB ‚îÇ gzip:   0.64 kB
dist/assets/InventoryReport-C1ProXf-.js               1.45 kB ‚îÇ gzip:   0.72 kB
dist/assets/UpdatePasswordView-p0lJQoPl.js            1.65 kB ‚îÇ gzip:   0.94 kB
dist/assets/productStore-HLxLuEw0.js                  2.10 kB ‚îÇ gzip:   0.86 kB
dist/assets/YearEndClosingView-DW26WiIV.js            2.37 kB ‚îÇ gzip:   1.21 kB
dist/assets/TrialBalance-CsB4h8kZ.js                  2.41 kB ‚îÇ gzip:   1.03 kB
dist/assets/ForgotPasswordView-B0gzg8r4.js            2.65 kB ‚îÇ gzip:   1.40 kB
dist/assets/AccountsReceivable-YdOLYW6g.js            2.74 kB ‚îÇ gzip:   1.30 kB
dist/assets/accountStore-DFAqUEMl.js                  2.77 kB ‚îÇ gzip:   0.98 kB
dist/assets/AccountsPayable-D0Czbc_b.js               2.81 kB ‚îÇ gzip:   1.34 kB
dist/assets/financialTransactionsStore-5oEW8EgZ.js    2.86 kB ‚îÇ gzip:   0.95 kB
dist/assets/IncomeStatement-DjbV1Bdd.js               3.45 kB ‚îÇ gzip:   1.33 kB
dist/assets/StockControlView-DIwVKBDF.js              3.50 kB ‚îÇ gzip:   1.55 kB
dist/assets/InitialView-hcOLJ7W9.js                   3.57 kB ‚îÇ gzip:   1.71 kB
dist/assets/RegisterView-C1XHZ-ed.js                  4.20 kB ‚îÇ gzip:   1.61 kB
dist/assets/CashFlow-CaXpUWai.js                      4.35 kB ‚îÇ gzip:   1.43 kB
dist/assets/LoginView-zesj6FAK.js                     4.36 kB ‚îÇ gzip:   1.98 kB
dist/assets/pinia-CMIf-7BF.js                         5.25 kB ‚îÇ gzip:   2.56 kB
dist/assets/BalanceSheet-B4kSywzP.js                  5.53 kB ‚îÇ gzip:   1.71 kB
dist/assets/LedgerView-n8nxdjmb.js                    5.96 kB ‚îÇ gzip:   2.17 kB
dist/assets/supabase-CJ6GytKG.js                      6.12 kB ‚îÇ gzip:   2.23 kB
dist/assets/journalEntryStore-DMu_mUL6.js             7.72 kB ‚îÇ gzip:   2.75 kB
dist/assets/reportStore-9zcm_Yyk.js                   8.99 kB ‚îÇ gzip:   2.06 kB
dist/assets/AccountsPayableView-CczhpDE9.js           9.21 kB ‚îÇ gzip:   2.37 kB
dist/assets/AccountsReceivableView-ypCsk4UM.js        9.43 kB ‚îÇ gzip:   2.40 kB
dist/assets/ProductsView-DUPXIuxc.js                 12.30 kB ‚îÇ gzip:   3.88 kB
dist/assets/LandingPage-BzBdwJQF.js                  14.67 kB ‚îÇ gzip:   4.35 kB
dist/assets/AccountsView-7OcATzDh.js                 19.76 kB ‚îÇ gzip:   6.49 kB
dist/assets/AccountingPeriodView-BP7IfBAJ.js         20.03 kB ‚îÇ gzip:   5.28 kB
dist/assets/ReportsView-BuuRjgK5.js                  22.43 kB ‚îÇ gzip:   6.21 kB
dist/assets/SettingsView-D-hkDlbN.js                 35.02 kB ‚îÇ gzip:   9.94 kB
dist/assets/vee-validate-COYqPtgk.js                 35.72 kB ‚îÇ gzip:  12.13 kB
dist/assets/index-DJ1cLxSg.js                        49.94 kB ‚îÇ gzip:  14.80 kB
dist/assets/zod-Dv3rLVNS.js                          55.77 kB ‚îÇ gzip:  13.11 kB
dist/assets/JournalEntryView-BOtCxd9P.js             60.20 kB ‚îÇ gzip:  15.80 kB
dist/assets/vue-Cbxm3tID.js                         182.93 kB ‚îÇ gzip:  60.63 kB
dist/assets/vendor-C6CgzKQV.js                      625.61 kB ‚îÇ gzip: 147.83 kB
dist/assets/primevue-BbsVU3fn.js                    685.58 kB ‚îÇ gzip: 158.15 kB
‚úì built in 3.78s
> Success! Build completed
> Ready! Available at http://localhost:3000
[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[dotenv@17.2.1] injecting env (0) from .env -- tip: üì° auto-backup env with Radar: https://dotenvx.com/radar
[dotenv@17.2.1] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
[dotenv@17.2.1] injecting env (0) from .env -- tip: üì° version env with Radar: https://dotenvx.com/radar
[dotenv@17.2.1] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
[dotenv@17.2.1] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.1] injecting env (0) from .env -- tip: üì° observe env with Radar: https://dotenvx.com/radar
[dotenv@17.2.1] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.1] injecting env (0) from .env -- tip: üì° version env with Radar: https://dotenvx.com/radar
Forcing backend rebuild
Forcing backend rebuild
(node:14092) [DEP0060] DeprecationWarning: The `util._extend` API is deprecated. Please use Object.assign() instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
[20:48:07.530] INFO: [ChatbotService] GEMINI_API_KEY carregada (primeiros 5 chars): AIzaS
[20:48:07.532] INFO: [ChatbotService] GEMINI_API_KEY carregada (primeiros 5 chars): AIzaS
[20:48:07.629] INFO: [API Router] Roteando o pedido para: GET /api/profile
[20:48:07.633] INFO: [API Router] Roteando o pedido para: GET /api/profile
[20:48:07.679] INFO: [API Router] Roteando o pedido protegido para: GET /profile
[20:48:07.686] INFO: [API Router] Roteando o pedido protegido para: GET /profile
backend/handlers/entry-lines.ts:268:35 - error TS2554: Expected 3 arguments, but got 2.

268         const taxSettings = await getTaxSettings(organization_id, token)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  backend/services/taxSettingService.ts:8:3
    8   transaction_date: string, // Adicionado
        ~~~~~~~~~~~~~~~~~~~~~~~~
    An argument for 'transaction_date' was not provided.

backend/handlers/entry-lines.ts:284:43 - error TS2345: Argument of type '{ total_gross: number | undefined; icms_rate: number; ipi_rate: number; pis_rate: number; cofins_rate: number; mva_rate: number; transaction_type: "sale" | "purchase"; total_net: number | null | undefined; }' is not assignable to parameter of type 'TaxCalculationParams'.
  Type '{ total_gross: number | undefined; icms_rate: number; ipi_rate: number; pis_rate: number; cofins_rate: number; mva_rate: number; transaction_type: "sale" | "purchase"; total_net: number | null | undefined; }' is missing the following properties from type 'TaxCalculationParams': organization_id, token

284         const taxResults = calculateTaxes({
                                              ~
285           total_gross,
    ~~~~~~~~~~~~~~~~~~~~~~
...
292           total_net,
    ~~~~~~~~~~~~~~~~~~~~
293         })
    ~~~~~~~~~

backend/handlers/entry-lines.ts:295:44 - error TS2339: Property 'calculated_icms_value' does not exist on type 'Promise<TaxCalculationResult>'.

295         calculated_icms_value = taxResults.calculated_icms_value
                                               ~~~~~~~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:295:44
    295         calculated_icms_value = taxResults.calculated_icms_value
                                                   ~~~~~~~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/entry-lines.ts:296:43 - error TS2339: Property 'calculated_ipi_value' does not exist on type 'Promise<TaxCalculationResult>'.

296         calculated_ipi_value = taxResults.calculated_ipi_value
                                              ~~~~~~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:296:43
    296         calculated_ipi_value = taxResults.calculated_ipi_value
                                                  ~~~~~~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/entry-lines.ts:297:43 - error TS2339: Property 'calculated_pis_value' does not exist on type 'Promise<TaxCalculationResult>'.

297         calculated_pis_value = taxResults.calculated_pis_value
                                              ~~~~~~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:297:43
    297         calculated_pis_value = taxResults.calculated_pis_value
                                                  ~~~~~~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/entry-lines.ts:298:46 - error TS2339: Property 'calculated_cofins_value' does not exist on type 'Promise<TaxCalculationResult>'.

298         calculated_cofins_value = taxResults.calculated_cofins_value
                                                 ~~~~~~~~~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:298:46
    298         calculated_cofins_value = taxResults.calculated_cofins_value
                                                     ~~~~~~~~~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/entry-lines.ts:299:47 - error TS2339: Property 'calculated_icms_st_value' does not exist on type 'Promise<TaxCalculationResult>'.

299         calculated_icms_st_value = taxResults.calculated_icms_st_value
                                                  ~~~~~~~~~~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:299:47
    299         calculated_icms_st_value = taxResults.calculated_icms_st_value
                                                      ~~~~~~~~~~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/entry-lines.ts:300:38 - error TS2339: Property 'final_total_net' does not exist on type 'Promise<TaxCalculationResult>'.

300         final_total_net = taxResults.final_total_net
                                         ~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:300:38
    300         final_total_net = taxResults.final_total_net
                                             ~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/tax-calculation.ts:54:44 - error TS2345: Argument of type '{ total_gross: number; icms_rate: number; ipi_rate: number; pis_rate: number; cofins_rate: number; mva_rate: number; transaction_type: "sale" | "purchase"; tax_regime: TaxRegime | undefined; total_net: number; }' is not assignable to parameter of type 'TaxCalculationParams'.
  Type '{ total_gross: number; icms_rate: number; ipi_rate: number; pis_rate: number; cofins_rate: number; mva_rate: number; transaction_type: "sale" | "purchase"; tax_regime: TaxRegime | undefined; total_net: number; }' is missing the following properties from type 'TaxCalculationParams': organization_id, token

 54     const calculatedTaxes = calculateTaxes({
                                               ~
 55       total_gross: fiscalData.totalAmount,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
...
 63       total_net: fiscalData.totalAmount,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 64     });
    ~~~~~


Found 9 errors in 2 files.

Errors  Files
     8  backend/handlers/entry-lines.ts:268
     1  backend/handlers/tax-calculation.ts:54
backend/handlers/entry-lines.ts:268:35 - error TS2554: Expected 3 arguments, but got 2.

268         const taxSettings = await getTaxSettings(organization_id, token)
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  backend/services/taxSettingService.ts:8:3
    8   transaction_date: string, // Adicionado
        ~~~~~~~~~~~~~~~~~~~~~~~~
    An argument for 'transaction_date' was not provided.

backend/handlers/entry-lines.ts:284:43 - error TS2345: Argument of type '{ total_gross: number | undefined; icms_rate: number; ipi_rate: number; pis_rate: number; cofins_rate: number; mva_rate: number; transaction_type: "sale" | "purchase"; total_net: number | null | undefined; }' is not assignable to parameter of type 'TaxCalculationParams'.
  Type '{ total_gross: number | undefined; icms_rate: number; ipi_rate: number; pis_rate: number; cofins_rate: number; mva_rate: number; transaction_type: "sale" | "purchase"; total_net: number | null | undefined; }' is missing the following properties from type 'TaxCalculationParams': organization_id, token

284         const taxResults = calculateTaxes({
                                              ~
285           total_gross,
    ~~~~~~~~~~~~~~~~~~~~~~
...
292           total_net,
    ~~~~~~~~~~~~~~~~~~~~
293         })
    ~~~~~~~~~

backend/handlers/entry-lines.ts:295:44 - error TS2339: Property 'calculated_icms_value' does not exist on type 'Promise<TaxCalculationResult>'.

295         calculated_icms_value = taxResults.calculated_icms_value
                                               ~~~~~~~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:295:44
    295         calculated_icms_value = taxResults.calculated_icms_value
                                                   ~~~~~~~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/entry-lines.ts:296:43 - error TS2339: Property 'calculated_ipi_value' does not exist on type 'Promise<TaxCalculationResult>'.

296         calculated_ipi_value = taxResults.calculated_ipi_value
                                              ~~~~~~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:296:43
    296         calculated_ipi_value = taxResults.calculated_ipi_value
                                                  ~~~~~~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/entry-lines.ts:297:43 - error TS2339: Property 'calculated_pis_value' does not exist on type 'Promise<TaxCalculationResult>'.

297         calculated_pis_value = taxResults.calculated_pis_value
                                              ~~~~~~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:297:43
    297         calculated_pis_value = taxResults.calculated_pis_value
                                                  ~~~~~~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/entry-lines.ts:298:46 - error TS2339: Property 'calculated_cofins_value' does not exist on type 'Promise<TaxCalculationResult>'.

298         calculated_cofins_value = taxResults.calculated_cofins_value
                                                 ~~~~~~~~~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:298:46
    298         calculated_cofins_value = taxResults.calculated_cofins_value
                                                     ~~~~~~~~~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/entry-lines.ts:299:47 - error TS2339: Property 'calculated_icms_st_value' does not exist on type 'Promise<TaxCalculationResult>'.

299         calculated_icms_st_value = taxResults.calculated_icms_st_value
                                                  ~~~~~~~~~~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:299:47
    299         calculated_icms_st_value = taxResults.calculated_icms_st_value
                                                      ~~~~~~~~~~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/entry-lines.ts:300:38 - error TS2339: Property 'final_total_net' does not exist on type 'Promise<TaxCalculationResult>'.

300         final_total_net = taxResults.final_total_net
                                         ~~~~~~~~~~~~~~~

  backend/handlers/entry-lines.ts:300:38
    300         final_total_net = taxResults.final_total_net
                                             ~~~~~~~~~~~~~~~
    Did you forget to use 'await'?

backend/handlers/tax-calculation.ts:54:44 - error TS2345: Argument of type '{ total_gross: number; icms_rate: number; ipi_rate: number; pis_rate: number; cofins_rate: number; mva_rate: number; transaction_type: "sale" | "purchase"; tax_regime: TaxRegime | undefined; total_net: number; }' is not assignable to parameter of type 'TaxCalculationParams'.
  Type '{ total_gross: number; icms_rate: number; ipi_rate: number; pis_rate: number; cofins_rate: number; mva_rate: number; transaction_type: "sale" | "purchase"; tax_regime: TaxRegime | undefined; total_net: number; }' is missing the following properties from type 'TaxCalculationParams': organization_id, token

 54     const calculatedTaxes = calculateTaxes({
                                               ~
 55       total_gross: fiscalData.totalAmount,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
...
 63       total_net: fiscalData.totalAmount,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 64     });
    ~~~~~


Found 9 errors in 2 files.

Errors  Files
     8  backend/handlers/entry-lines.ts:268
     1  backend/handlers/tax-calculation.ts:54